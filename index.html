<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RifqyDownloader 2025</title>
  <style>
    :root{--c:#00ff41;--bg:#000;--card:#0d0d0d}
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:var(--bg);color:var(--c);font-family:Arial;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:15px;background:radial-gradient(#111,#000)}
    .box{background:var(--card);padding:35px;border-radius:25px;max-width:500px;width:100%;text-align:center;box-shadow:0 0 50px rgba(0,255,65,0.5);border:3px solid var(--c)}
    h1{font-size:3em;background:linear-gradient(90deg,#0f0,#0ff);-webkit-background-clip:text;color:transparent;margin-bottom:8px}
    p{font-size:1.1em;margin:18px 0;opacity:0.9}
    input{width:100%;padding:18px;background:#111;border:2px solid var(--c);border-radius:15px;color:white;font-size:1.1em;margin:20px 0}
    button{background:var(--c);color:#000;padding:18px;border:none;border-radius:15px;font-size:1.4em;font-weight:bold;cursor:pointer;width:100%;transition:.3s}
    button:hover{transform:scale(1.05);box-shadow:0 0 40px #0f0}
    #result{margin-top:30px}
    video, img{max-width:100%;border-radius:15px;margin:15px 0;box-shadow:0 0 25px #0f0}
    a{background:#0ff;color:#000;padding:15px 35px;border-radius:12px;text-decoration:none;font-weight:bold;display:inline-block;margin:10px}
    .footer{margin-top:50px;font-size:0.9em;opacity:0.7}
  </style>
</head>
<body>
<div class="box">
  <h1>RIFQYDOWNLOADER</h1>
  <p>TikTok • Instagram • YouTube • Facebook<br><b>Tanpa Watermark • Backup Server Tercepat • 100% Gratis</b></p>
  <input type="text" id="url" placeholder="Paste link video/gambar di sini..." autofocus />
  <button onclick="gas()">DOWNLOAD SEKARANG</button>
  <div id="result"></div>
  <div class="footer">© 2025 RifqyDownloader – 1 File Only – Server Auto-Switch</div>
</div>

<script>
// CORS Proxy (paling bandel 2025)
const proxy = "https://cors.rifqy.workers.dev/?";

// Semua API tercepat + backup otomatis
const apis = {
  tiktok: [
    "https://tikwm.com/api/?url=",
    "https://api.tiklydown.eu.org/api/download?url=",
    "https://api16-normal-c-useast1a.tiktokv.com/aweme/v1/feed/?aweme_id=",
    "https://api.savefrom.net/v2/download?url="
  ],
  instagram: [
    "https://api.saveinsta.app/v1/download?url=",
    "https://v3.igdownloader.app/api/ajaxSearch?q=",
    "https://api.instagramdownloader.org/dl?url="
  ],
  youtube: [
    "https://p.oceansaver.in/api/youtube?url=",
    "https://co.wukko.me/api/json",
    "https://api.ytbvideoly.com/api/convert?url="
  ],
  facebook: [
    "https://api.veeroo.net/v1/facebook?url=",
    "https://fdown.net/download.php?url=",
    "https://api.fdownloader.net/v2/download?url="
  ]
};

async function gas() {
  const url = document.getElementById("url").value.trim();
  const res = document.getElementById("result");
  if (!url) return res.innerHTML = "<p style='color:#f44'>Link kosong bro!</p>";
  res.innerHTML = "<p>Sedang cari server tercepat...</p>";

  let video = "";
  let title = "";

  try {
    if (url.includes("tiktok.com") || url.includes("vt.tiktok.com")) {
      for (let api of apis.tiktok) {
        try {
          const r = await fetch(proxy + api + url);
          const d = await r.json();
          video = d.data?.play || d.video || d.hd || d.url || d.result;
          title = d.data?.title || "tiktok_video";
          if (video) break;
        } catch {}
      }
    }
    else if (url.includes("instagram.com")) {
      for (let api of apis.instagram) {
        try {
          const r = await fetch(proxy + api + url);
          const d = await r.json();
          video = d.url || d[0]?.url || d.medias?.[0]?.url;
          if (video) break;
        } catch {}
      }
    }
    else if (url.includes("youtube.com") || url.includes("youtu.be")) {
      for (let api of apis.youtube) {
        try {
          const body = api.includes("json") ? JSON.stringify({url}) : "";
          const r = await fetch(proxy + api, body ? {method:"POST",body,headers:{"Content-Type":"application/json"}} : {});
          const d = await r.json();
          video = d.url || d.picker?.[0]?.url || d.video;
          if (video) break;
        } catch {}
      }
    }
    else if (url.includes("facebook.com") || url.includes("fb.watch")) {
      for (let api of apis.facebook) {
        try {
          const r = await fetch(proxy + api + url);
          const text = await r.text();
          const d = await r.json().catch(()=>null);
          video = d?.hd || d?.sd || text.match(/"hd":"(.*?)"/)?.[1]?.replace(/\\//g,"/");
          if (video) break;
        } catch {}
      }
    }
    else return res.innerHTML = "<p style='color:#f44'>Link belum support!</p>";

    if (!video) throw "Server lagi penuh";

    res.innerHTML = `
      <video controls src="${video}" poster=""></video><br>
      <a href="\( {video}" download=" \){title || "rifqy_video"}.mp4"> DOWNLOAD VIDEO HD</a>
      \( {video.includes(".jpg") || video.includes(".png") ? `<img src=" \){video}">` : ""}
    `;
  } catch(e) {
    res.innerHTML = "<p style='color:#f44'>Gagal / link private. Coba link lain!</p>";
  }
}

// Tekan Enter = langsung download
document.getElementById("url").addEventListener("keyup", e => { if(e.key==="Enter") gas(); });
</script>
</body>
</html>
