<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>RifqyDownloader 2025</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    :root{--c:#00ff41;--bg:#000;--card:#0a0a0a}
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{background:var(--bg);color:var(--c);font-family:'Segoe UI',sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:15px;touch-action:manipulation}
    .box{background:var(--card);padding:40px 30px;border-radius:28px;max-width:520px;width:100%;text-align:center;box-shadow:0 0 60px rgba(0,255,65,0.6);border:3px solid var(--c);position:relative;overflow:hidden}
    .glow{position:absolute;inset:0;background:linear-gradient(45deg,transparent 30%,rgba(0,255,65,0.1) 50%,transparent 70%);animation:glow 4s infinite}
    @keyframes glow{0%,100%{transform:translateX(-100%)}50%{transform:translateX(100%)}}
    h1{font-size:clamp(2.3em,6vw,3.8em);background:linear-gradient(90deg,#0f0,#0ff,#0f0);background-size:200%;-webkit-background-clip:text;color:transparent;animation:shine 6s infinite}
    @keyframes shine{background-position:200%}
    p{font-size:1.15em;margin:20px 0;opacity:0.9}
    .input-group{position:relative;margin:25px 0}
    #url{width:100%;padding:20px 20px 20px 55px;background:#111;border:2px solid var(--c);border-radius:18px;color:white;font-size:1.15em;transition:.3s}
    #url:focus{outline:none;transform:scale(1.02);box-shadow:0 0 25px rgba(0,255,65,0.7)}
    .fa-link{position:absolute;left:20px;top:22px;color:var(--c);font-size:1.3em}
    button{background:var(--c);color:#000;padding:20px;border:none;border-radius:18px;font-size:1.5em;font-weight:bold;cursor:pointer;width:100%;transition:.4s;position:relative;overflow:hidden}
    button:hover{transform:scale(1.05);box-shadow:0 0 50px #0f0}
    button:active{transform:scale(0.98)}
    #result{margin-top:30px;min-height:100px}
    video,img{max-width:100%;border-radius:18px;margin:20px 0;box-shadow:0 0 30px #0f0}
    a{background:#00ffff;color:#000;padding:16px 40px;border-radius:14px;text-decoration:none;font-weight:bold;margin:10px;display:inline-block;transition:.3s}
    a:hover{transform:translateY(-4px);box-shadow:0 10px 30px rgba(0,255,255,0.4)}
    .footer{margin-top:60px;font-size:0.9em;opacity:0.7}
    .spinner{display:inline-block;width:22px;height:22px;border:3px solid #333;border-top:3px solid var(--c);border-radius:50%;animation:spin 1s linear infinite;margin-right:10px;vertical-align:middle}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
  </style>
</head>
<body>
<div class="box">
  <div class="glow"></div>
  <h1>RIFQYDOWNLOADER</h1>
  <p>TikTok • Instagram • YouTube • Facebook<br><b>Tanpa Watermark • 5 Backup Server • 100% Gratis</b></p>
  
  <div class="input-group">
    <i class="fas fa-link"></i>
    <input type="text" id="url" placeholder="Paste link video/gambar di sini..." autofocus />
  </div>
  
  <button onclick="gas()">DOWNLOAD SEKARANG</button>
  
  <div id="result"></div>
  
  <div class="footer">© 2025 RifqyDownloader – 1 File Only – Auto Switch Server</div>
</div>

<script>
// 5 CORS PROXY TERBAIK 2025 – Auto Switch (gak pernah mati)
const proxies = [
  "https://corsproxy.io/?",                    // Paling cepat Indo
  "https://api.allorigins.win/raw?url=",       // Super stabil
  "https://cors.lol/",                         // Unlimited 2025
  "https://thingproxy.freeboard.io/fetch/",    // Bandel klasik
  "https://cors-anywhere.herokuapp.com/"      // Cadangan terakhir
];

// API tercepat + backup
const apis = {
  tiktok: [
    "https://tikwm.com/api/?url=",
    "https://api.tiklydown.eu.org/api/download?url=",
    "https://api.savefrom.net/v2/download?url="
  ],
  instagram: [
    "https://api.saveinsta.app/v1/download?url=",
    "https://v3.igdownloader.app/api/ajaxSearch?q=",
    "https://api.instagramdownloader.org/dl?url="
  ],
  youtube: [
    "https://p.oceansaver.in/api/youtube?url=",
    "https://co.wukko.me/api/json",
    "https://api.ytbvideoly.com/api/convert?url="
  ],
  facebook: [
    "https://api.veeroo.net/v1/facebook?url=",
    "https://fdown.net/download.php?url=",
    "https://api.fdownloader.net/v2/download?url="
  ]
];

async function gas() {
  const url = document.getElementById("url").value.trim();
  const result = document.getElementById("result");
  if (!url) return result.innerHTML = "<p style='color:#f44'>Link kosong bro!</p>";
  
  result.innerHTML = "<span class='spinner'></span> Mencari server tercepat...";

  let videoUrl = "";

  try {
    // Coba semua proxy + semua API sampai berhasil
    for (let proxy of proxies) {
      for (let apiBase of (apis.tiktok.includes(url) ? apis.tiktok :
                          url.includes("instagram") ? apis.instagram :
                          url.includes("youtube") || url.includes("youtu.be") ? apis.youtube :
                          apis.facebook)) {
        try {
          const fullUrl = proxy + apiBase + encodeURIComponent(url);
          const options = apiBase.includes("json") ? {
            method: "POST",
            body: JSON.stringify({url}),
            headers: {"Content-Type":"application/json"}
          } : {};
          
          const r = await fetch(fullUrl, options);
          if (!r.ok) continue;
          
          const d = await r.json().catch(()=>null) || {};
          const text = await r.text();
          
          // Extract video URL dari berbagai format
          videoUrl = d.data?.play || d.video || d.hd || d.url || d.result || 
                     d.medias?.[0]?.url || d.download_url || 
                     text.match(/"hd":"(.*?)"/)?.[1]?.replace(/\\\//g,"/") ||
                     text.match(/href="(https:\/\/[^"]+\.mp4)/)?.[1];
          
          if (videoUrl) {
            result.innerHTML = `
              <video controls src="${videoUrl}" style="border-radius:18px;"></video><br>
              <a href="${videoUrl}" download>
                <i class="fas fa-download"></i> DOWNLOAD VIDEO HD
              </a>
            `;
            return; // SUCCESS → stop semua loop
          }
        } catch(e) {}
      }
    }
    
    throw "Server lagi penuh";
  } catch(e) {
    result.innerHTML = "<p style='color:#f44'>Gagal / link private. Coba link lain ya!</p>";
  }
}

// Enter = download
document.getElementById("url").addEventListener("keyup", e => {
  if(e.key === "Enter") gas();
});
</script>
</body>
</html>
